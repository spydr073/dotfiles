
#──────────────────────────────────────────────────────────────────────────────────────────────────
#
#    ████████╗███╗   ███╗██╗   ██╗██╗  ██╗     ██████╗ ██████╗ ███╗   ██╗███████╗██╗ ██████╗
#    ╚══██╔══╝████╗ ████║██║   ██║╚██╗██╔╝    ██╔════╝██╔═══██╗████╗  ██║██╔════╝██║██╔════╝
#       ██║   ██╔████╔██║██║   ██║ ╚███╔╝     ██║     ██║   ██║██╔██╗ ██║█████╗  ██║██║  ███╗
#       ██║   ██║╚██╔╝██║██║   ██║ ██╔██╗     ██║     ██║   ██║██║╚██╗██║██╔══╝  ██║██║   ██║
#       ██║   ██║ ╚═╝ ██║╚██████╔╝██╔╝ ██╗    ╚██████╗╚██████╔╝██║ ╚████║██║     ██║╚██████╔╝
#       ╚═╝   ╚═╝     ╚═╝ ╚═════╝ ╚═╝  ╚═╝     ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚═╝     ╚═╝ ╚═════╝
#
#──────────────────────────────────────────────────────────────────────────────────────────────────



#--------------------------------------------------------------------------------------[ Settings ]
#{{{1
set-option -ga terminal-overrides ",xterm-256color:Tc"
set-option -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

set -g update-environment "SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY"

#-- disable automatic window rename
set-option -g allow-rename off

#-- usability
set-window-option -g mode-keys vi
set-option -g status-keys vi

#-- durration of messages
set -g display-time 1000

#-- set scrollback history
set -g history-limit 10000

#-- shorten command delay
set -sg escape-time 0

#-- aggressive resizing of windows
set-window-option -g aggressive-resize on

#-- set window and pane index to 0 or 1 (0 by default)
set-option -g base-index 0
setw -g pane-base-index 0
setw -g main-pane-width 80
#}}}


#--------------------------------------------------------------------------------------[ Bindings ]
#{{{1
#-- reset leader key
unbind C-b
set-option -g prefix `
bind-key ` send-prefix

#-- splitting windows
bind = split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

#-- mouse toggling
bind m run "\
    tmux show-options -g | grep -q "mouse.*on"; \
    if [ \$? = 0 ]; \
    then  \
        toggle=off;  \
    else  \
        toggle=on;  \
    fi;  \
    tmux display-message \"  mouse-mode : \$toggle\";  \
    tmux set-option -w mouse \$toggle; \
    tmux set-option -g mouse \$toggle; \
    "

#-- zoom current pane
bind Z \
    new-window -d -n tmux-zoom 'clear && echo TMUX ZOOM && read' \;\
    swap-pane -s tmux-zoom.0 \;\
    select-window -t tmux-zoom
#-- restore zoomed pane
bind z \
    last-window \;\
    swap-pane -s tmux-zoom.0 \;\
    kill-window -t tmux-zoom

#-- config reload
bind r source-file ~/.tmux.conf \; display "  Reloaded"

#-- kill bindings
bind k confirm-before -p "kill-window #W? (y/n)" kill-window

#-- create new window
bind-key c command-prompt -p "  window name:"  " new-window; rename-window '%%'"

#-- window movement / renumbering like in screen's :number
bind-key T command-prompt -p "  window tag:"  " swap-window -t '%%'"
bind-key t command-prompt -p "  window tag:"  " select-window -t '%%'"

#-- use C-h and C-l to cycle through panes
bind j select-pane -t :.-
bind k select-pane -t :.+

#-- resize panes using prefix H, J, K, L
bind h resize-pane -L 5
bind J resize-pane -D 5
bind K resize-pane -U 5
bind l resize-pane -R 5
#}}}


#------------------------------------------------------------------------------------[ Appearance ]
#{{{1

#-- window style
set-option -g pane-border-fg black
set-option -g pane-active-border-fg black

#-- alert style
set-option -g message-bg default
set-option -g message-fg red

#-- statusbar settings
set-option -g status on                 # turn the status bar on
set -g status-interval 20               # set update frequencey (default 15 seconds)
set -g status-justify left

# visual notification of activity in other windows
setw -g monitor-activity on
set -g visual-activity on

#setw -g window-status-current-attr underscore
#setw -g window-status-attr underscore
#setw -g window-status-current-attr none
#setw -g window-status-attr none

set -g status-fg white
set -g status-bg "#111111"

#-- set left status bar
set -g status-left-length 80
setw -g status-left "#[fg=#814471,bg=#220022] #(hostname) #[fg=#777777,bg=#222222] #{pane_current_command} [#P] #[default]  "

#-- set window status format
set -g window-status-separator "  "
setw -g window-status-format "#[fg=#777777,bg=#222222] #I∙#W #[default]"
setw -g window-status-current-format "#[fg=#3dc4dd,bg=#222222] #I∙#W #[default]"

#-- set right status bar
set -g status-right-length 60
set -g status-right "#(~/dotfiles/tmux/net_info.sh)#[default]"

#}}}



