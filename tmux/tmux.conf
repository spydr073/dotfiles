
#──────────────────────────────────────────────────────────────────────────────────────────────────
#
#    ████████╗███╗   ███╗██╗   ██╗██╗  ██╗     ██████╗ ██████╗ ███╗   ██╗███████╗██╗ ██████╗
#    ╚══██╔══╝████╗ ████║██║   ██║╚██╗██╔╝    ██╔════╝██╔═══██╗████╗  ██║██╔════╝██║██╔════╝
#       ██║   ██╔████╔██║██║   ██║ ╚███╔╝     ██║     ██║   ██║██╔██╗ ██║█████╗  ██║██║  ███╗
#       ██║   ██║╚██╔╝██║██║   ██║ ██╔██╗     ██║     ██║   ██║██║╚██╗██║██╔══╝  ██║██║   ██║
#       ██║   ██║ ╚═╝ ██║╚██████╔╝██╔╝ ██╗    ╚██████╗╚██████╔╝██║ ╚████║██║     ██║╚██████╔╝
#       ╚═╝   ╚═╝     ╚═╝ ╚═════╝ ╚═╝  ╚═╝     ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚═╝     ╚═╝ ╚═════╝
#
#──────────────────────────────────────────────────────────────────────────────────────────────────



#--------------------------------------------------------------------------------------[ Settings ]
#{{{1
set-option -ga terminal-overrides ",xterm-256color:Tc"
set-option -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

set -g update-environment "SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY"

#-- disable automatic window rename
set-option -g allow-rename off

#-- usability
set-window-option -g mode-keys vi
set-option -g status-keys vi

#-- durration of messages
set -g display-time 1000

#-- set scrollback history
set -g history-limit 10000

#-- shorten command delay
set -sg escape-time 0

#-- aggressive resizing of windows
set-window-option -g aggressive-resize on

#-- set window and pane index to 0 or 1 (0 by default)
set-option -g base-index 0
setw -g pane-base-index 0
setw -g main-pane-width 80

#-- disable bell messages
set -g bell-action any
set -g visual-bell off
set -g visual-activity off
set -g visual-silence off
#}}}

#--------------------------------------------------------------------------------------[ Bindings ]
#{{{1
#-- reset leader key
unbind C-b
set-option -g prefix `
bind-key ` send-prefix

#-- splitting windows
bind = split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

#-- mouse toggling
bind m run "\
    tmux show-options -g | grep -q "mouse.*on"; \
    if [ \$? = 0 ]; \
    then  \
        toggle=off;  \
    else  \
        toggle=on;  \
    fi;  \
    tmux display-message \"  mouse-mode : \$toggle\";  \
    tmux set-option -w mouse \$toggle; \
    tmux set-option -g mouse \$toggle; \
    "

#-- zoom current pane
bind Z \
    new-window -d -n tmux-zoom 'clear && echo TMUX ZOOM && read' \;\
    swap-pane -s tmux-zoom.0 \;\
    select-window -t tmux-zoom
#-- restore zoomed pane
bind z \
    last-window \;\
    swap-pane -s tmux-zoom.0 \;\
    kill-window -t tmux-zoom

#-- config reload
bind r source-file ~/.tmux.conf \; display "  Configuration Reload "

#-- kill bindings
bind k confirm-before -p "kill-window #W? (y/n)" kill-window

#-- create new window
bind-key c command-prompt -p "  window name:"  " new-window; rename-window '%%'"

#-- window renumbering
bind-key t command-prompt -p "  window tag:"  " swap-window -t '%%'"

#-- use C-h and C-l to cycle through panes
bind j select-pane -t :.-
bind k select-pane -t :.+

#-- resize panes using prefix H, J, K, L
bind h resize-pane -L 5
bind J resize-pane -D 5
bind K resize-pane -U 5
bind l resize-pane -R 5

#}}}

#------------------------------------------------------------------------------------[ Appearance ]
#{{{1

#-- window style
set-option -g pane-border-fg black
set-option -g pane-active-border-fg black

#-- alert style
set-option -g message-bg default
set-option -g message-fg "#77dd88"

# visual notification of activity in other windows
setw -g monitor-activity on
setw -g window-status-activity-fg "#77dd88"
setw -g window-status-activity-bg "#222222"
setw -g window-status-activity-attr none
set -g window-status-separator ""

#-- statusbar settings
set-option -g status on
set -g status-interval 20
set -g status-justify left

set -g status-fg "#ffffff"
set -g status-bg "#000000"


#-- format window tags
setw -g window-status-format "\
#{?window_activity_flag,\
#[fg=#000000]#[bg=#cccccc]\
#[fg=#ca5555]#[bg=#cccccc] #I∙#W \
#[fg=#cccccc]#[bg=#000000]\
#[default]\
,\
#[fg=#000000]#[bg=#444444]\
#[fg=#888888]#[bg=#444444] #I∙#W \
#[fg=#444444]#[bg=#000000]\
#[default]\
}"

#-- current window tag
setw -g window-status-current-format "\
#[fg=#000000]#[bg=#666666]\
#[fg=#000000]#[bg=#666666] #I∙#W \
#[fg=#666666]#[bg=#000000]\
#[default]"


#-- length of left div
set -g status-left-length 80

#-- left div contents
setw -g status-left "\
#[fg=#111111]#[bg=#ababab] τ◦#(uptime | awk -F '[, ]' '{print $7}') \
#[fg=#888888]#[bg=#444444] #{pane_current_command} [#P] \
#[fg=#444444]#[bg=#000000]\
#[default]"

#-- length of right div
set -g status-right-length 60

#-- right div contents
set -g status-right "#(~/dotfiles/tmux/net_info.sh)#[default]"

#}}}



